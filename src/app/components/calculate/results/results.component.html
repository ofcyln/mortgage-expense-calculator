<mat-card fxLayout="row"
          fxLayoutAlign="center center"
          fxFlex="0 1 80"
          class="md-elevation-z9"
          [fxFlex.lt-md]="'0 1 90'">
  <mat-list fxFlex="0 1 85"
            [fxFlex.lt-md]="'0 1 100'"
            fxLayout="column"
            fxLayoutAlign="center center"
            class="margin-top-md margin-bottom-md">
    <mat-list-item *ngFor="let expenseItem of expenseItems"
                   [ngStyle.lt-md]="{'height': '100%'}"
                   fxFlex>
      <article fxFlex="70"
               [fxFlex.lt-md]="75"
               fxLayout="row"
               fxLayoutAlign="space-between center">
        <section fxLayout="column">
          <mat-checkbox *ngIf="expenseItem.specialExpense; else nameField"
                        (change)="updateExpenseItemCheckedState()"
                        [(ngModel)]="expenseItem.checked">
            <p [ngStyle.lt-md]="{'font-weight': '500'}"
               [ngClass.lt-md]="'margin-top-sm'"
               class="margin-bottom-zero">
              {{ expenseItem.name }}
            </p>

            <p *ngIf="!expenseItem.compulsory"
               [ngStyle.gt-sm]="{'display': 'none'}"
               [ngStyle.lt-md]="{'font-size': '11px', 'font-weight': '500'}"
               class="margin-bottom-zero">(Not compulsory)</p>

            <p *ngIf="expenseItem.taxDeductible"
               [ngStyle.gt-sm]="{'display': 'none'}"
               [ngStyle.lt-md]="{'font-size': '11px', 'font-weight': '500'}"
               class="margin-bottom-zero">(This cost is tax deductible, which means it can be lowered with effectively
              38% or 49% depending on the amount of your gross income.)</p>

            <p [ngStyle.gt-sm]="{'display': 'none'}"
               [ngStyle.lt-md]="{'font-size': '12px'}"
               [ngClass.lt-md]="'margin-top-sm'"> {{ expenseItem.info }} </p>
          </mat-checkbox>

          <ng-template #nameField>
            <p [ngStyle.lt-md]="{'font-weight': '500'}"> {{ expenseItem.name }}
              <span *ngIf="!expenseItem.compulsory"
                    [ngStyle.gt-sm]="{'display': 'none'}"
                    [ngStyle.lt-md]="{'font-size': '12px'}">(Not compulsory.)</span>
            </p>

            <p *ngIf="expenseItem.approximate"
               [ngStyle.gt-sm]="{'display': 'none'}"
               [ngStyle.lt-md]="{'font-size': '11px', 'font-weight': '500'}"
               class="margin-bottom-zero">(This cost is tax deductible, which means it can be lowered with effectively
              38% or 49% depending on the amount of your gross income.)</p>

            <p *ngIf="expenseItem.taxDeductible"
               [ngStyle.gt-sm]="{'display': 'none'}"
               [ngStyle.lt-md]="{'font-size': '11px', 'font-weight': '500'}"
               class="margin-bottom-zero">(This expense has an average amount.)</p>

            <p [ngStyle.gt-sm]="{'display': 'none'}"
               [ngStyle.lt-md]="{'font-size': '12px'}"> {{ expenseItem.info }} </p>
          </ng-template>
        </section>

        <section fxLayoutAlign="end center"
                 [ngStyle.lt-md]="{'display': 'none'}">
          <mat-icon *ngIf="expenseItem.taxDeductible"
                    mat-list-icon
                    matTooltip="This cost is tax deductible, which means it can be lowered with effectively 38% or 49% depending on the amount of your gross income."
                    color="warn"
                    [matTooltipPosition]="'right'"
                    [ngStyle.gt-xs]="{'cursor': 'help'}">euro_symbol
          </mat-icon>

          <mat-icon *ngIf="!expenseItem.compulsory"
                    mat-list-icon
                    matTooltip="Not compulsory."
                    color="primary"
                    [matTooltipPosition]="'right'"
                    [ngStyle.gt-xs]="{'cursor': 'help'}">info
          </mat-icon>

          <mat-icon *ngIf="expenseItem.approximate"
                    mat-list-icon
                    aria-hidden="false"
                    svgIcon="approximately"
                    matTooltip="This expense has an average amount."
                    color="accent"
                    [matTooltipPosition]="'right'"
                    [ngStyle.gt-xs]="{'cursor': 'help'}"
                    aria-label="Approximate icon">approximately
          </mat-icon>

          <mat-icon mat-list-icon
                    matTooltip="{{ expenseItem.info }}"
                    [matTooltipPosition]="'right'"
                    [ngStyle.gt-xs]="{'cursor': 'help'}">help
          </mat-icon>
        </section>

      </article>

      <article fxFlex="30"
               [fxFlex.lt-md]="25"
               fxLayoutAlign="end center">
              <span> {{ calculateExpense(expenseItem.amount.bothApplicable, expenseItem.amount.costRange, expenseItem.amount.percentage, expenseItem.checked).average }} </span>
      </article>
    </mat-list-item>

    <mat-divider class="position-relative"></mat-divider>

    <mat-list-item fxFlex>
      <p fxFlex="70"
         fxLayoutAlign="end center"
         [ngStyle]="{'font-size': '24px'}"> TOTAL </p>
      <p fxFlex="30"
         fxLayoutAlign="end center"
         [ngStyle]="{'font-size': '24px'}"> {{ totalExpenseAmounts.average }} </p>
    </mat-list-item>
  </mat-list>
</mat-card>
